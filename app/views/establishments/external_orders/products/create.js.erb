<%= render 'shared/flash_message' %>

$('#row-ord-prod-<%= @form_id %>').find('.product-code').attr('readonly', true);
$('#row-ord-prod-<%= @form_id %>').find('.product-id').attr('readonly', true);
$('#row-ord-prod-<%= @form_id %>').find('.product-name').attr('readonly', true);
$('#row-ord-prod-<%= @form_id %>').find('.product-unity').attr('readonly', true);
$('#row-ord-prod-<%= @form_id %>').find('.stock-quantity').attr('readonly', true);
$('#row-ord-prod-<%= @form_id %>').find('.request-quantity').attr('readonly', true);
$('#row-ord-prod-<%= @form_id %>').find('.observations').attr('readonly', true);

$('#row-ord-prod-<%= @form_id %>').find('.creating-buttons').fadeOut(300, function(e){  
  <% js = escape_javascript(
    render "shared/orders/buttons_action", order: @external_order, order_product: @external_order_product
  ) %>
  $('#row-ord-prod-<%= @form_id %>').find('.creating-buttons').first().html("<%= js %>");
  
  $('#row-ord-prod-<%= @form_id %>').find(('.btn-delete-confirm').on('click', function(e) {
    const modal = $(e.target).attr('data-target');
    const title = $(e.target).attr('data-title');
    const body = $(e.target).attr('data-body');
    const href = $(e.target).attr('data-href');

    $(modal).find('.modal-title').text(title);
    $(modal).find('.modal-body').text(body);
    $(modal).find('.btn[data-method="delete"]').attr('href', href);
    $(modal).modal('toggle');
  });
  
  $('#row-ord-prod-<%= @form_id %>').find('.creating-buttons').fadeIn(300);
});
