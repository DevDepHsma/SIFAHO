<%= render 'shared/flash_message' %>
<% sidebar = escape_javascript(
  render(partial: 'layouts/side_navigation')
) %>
<% header = escape_javascript(
  render(partial: 'users/partials/header')
) %>

<% edit_title = escape_javascript(
  render(partial: 'permissions/partials/edit_title')
) %>

<% lotcation_select = escape_javascript(
  render(partial: 'permissions/partials/location_select')
) %>

<% permissions_list = escape_javascript(
  render(partial: 'permissions/partials/list')
) %>

$("#sidebar-wrapper").replaceWith("<%= sidebar %>");
$("#modules-links").html("<%= header %>");
$("#edit-title").html("<%= edit_title %>");
$("#location_select_container").html("<%= lotcation_select %>");
$("#permissions_list").html("<%= permissions_list %>");


  $("#open-sectors-select-modal").on('click', (e) => {
    const modalId = $(e.target).attr('data-target')
    if ($("#permission_users").hasClass('editing')) {
      modalConfirm(function(confirm){
        if(confirm){
          $(modalId).modal('show');
        }
      });
    }else{      
      $(modalId).modal('show');
    }
  })
$("#permission_users").removeClass('editing')
  toggleLoading();