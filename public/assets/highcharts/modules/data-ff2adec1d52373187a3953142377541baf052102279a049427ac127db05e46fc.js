"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e:e(Highcharts)}(function(e){!function(x){var C,g,n=x.win.document,c=x.each,f=x.objectEach,r=x.pick,v=x.inArray,Y=x.isNumber,F=x.splat,w=x.fireEvent;C=Array.prototype.some?function(e,t,n){Array.prototype.some.call(e,t,n)}:function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(!0===t.call(n,e[r],r,e))return};var a=function(e,t){this.init(e,t)};x.extend(a.prototype,{init:function(e,t){this.options=e,this.chartOptions=t,this.columns=e.columns||this.rowsToColumns(e.rows)||[],this.firstRowAsNames=r(e.firstRowAsNames,!0),this.decimalRegex=e.decimalPoint&&new RegExp("^(-?[0-9]+)"+e.decimalPoint+"([0-9]+)$"),this.rawColumns=[],this.columns.length?this.dataFound():(this.parseCSV(),this.parseTable(),this.parseGoogleSpreadsheet())},getColumnDistribution:function(){var s,o=this.chartOptions,e=this.options,t=[],a=function(e){return(x.seriesTypes[e||"line"].prototype.pointArrayMap||[0]).length},l=function(e){return x.seriesTypes[e||"line"].prototype.pointArrayMap},u=o&&o.chart&&o.chart.type,d=[],h=[],m=0;c(o&&o.series||[],function(e){d.push(a(e.type||u))}),c(e&&e.seriesMapping||[],function(e){t.push(e.x||0)}),0===t.length&&t.push(0),c(e&&e.seriesMapping||[],function(e){var n=new g,t=d[m]||a(u),r=(o&&o.series||[])[m]||{},i=l(r.type||u)||["y"];for(n.addColumnReader(e.x,"x"),f(e,function(e,t){"x"!==t&&n.addColumnReader(e,t)}),s=0;s<t;s++)n.hasReader(i[s])||n.addColumnReader(undefined,i[s]);h.push(n),m++});var n=l(u);n===undefined&&(n=["y"]),this.valueCount={global:a(u),xColumns:t,individual:d,seriesBuilders:h,globalPointArrayMap:n}},dataFound:function(){this.options.switchRowsAndColumns&&(this.columns=this.rowsToColumns(this.columns)),this.getColumnDistribution(),this.parseTypes(),!1!==this.parsed()&&this.complete()},parseCSV:function(e){function t(t,e,n,r){function i(e){l=t[e],u=t[e-1],d=t[e+1]}function s(e){v.length<f+1&&v.push([e]),v[f][v[f].length-1]!==e&&v[f].push(e)}function o(){if(m<g||y<m)return++m,void(h="");!isNaN(parseFloat(h))&&isFinite(h)?(h=parseFloat(h),s("number")):isNaN(Date.parse(h))?s("string"):(h=h.replace(/\//g,"-"),s("date")),p.length<f+1&&p.push([]),n||(p[f][e]=h),h="",++f,++m}var a=0,l="",u="",d="",h="",m=0,f=0;if(t.trim().length&&"#"!==t.trim()[0]){for(;a<t.length;a++){if(i(a),"#"===l)return void o();if('"'===l)for(i(++a);a<t.length&&('"'!==l||'"'===u||'"'===d);)('"'!==l||'"'===l&&'"'!==u)&&(h+=l),i(++a);else r&&r[l]?r[l](l,h)&&o():l===c?o():h+=l}o()}}function n(e){var l=0,u=0,t=!1;return C(e,function(e,t){var n,r,i,s=!1,o="";if(13<t)return!0;for(var a=0;a<e.length;a++){if(n=e[a],r=e[a+1],i=e[a-1],"#"===n)return;if('"'===n)if(s){if('"'!==i&&'"'!==r){for(;" "===r&&a<e.length;)r=e[++a];"undefined"!=typeof d[r]&&d[r]++,s=!1}}else s=!0;else"undefined"!=typeof d[n]?(o=o.trim(),isNaN(Date.parse(o))&&!isNaN(o)&&isFinite(o)||d[n]++,o=""):o+=n;","===n&&u++,"."===n&&l++}}),t=d[";"]>d[","]?";":(d[","],d[";"],","),m.decimalPoint||(m.decimalPoint=u<l?".":",",h.decimalRegex=new RegExp("^(-?[0-9]+)"+m.decimalPoint+"([0-9]+)$")),t}function r(e,t){var n,r,i,s,o="YYYY/mm/dd",a=0,l=!1,u=[],d=[];for((!t||t>e.length)&&(t=e.length);a<t;a++)if("undefined"!=typeof e[a]&&e[a]&&e[a].length)for(n=e[a].trim().replace(/\//g," ").replace(/\-/g," ").split(" "),r=["","",""],s=0;s<n.length;s++)s<r.length&&(n[s]=parseInt(n[s],10),n[s]&&(d[s]=!d[s]||d[s]<n[s]?n[s]:d[s],"undefined"!=typeof u[s]?u[s]!==n[s]&&(u[s]=!1):u[s]=n[s],31<n[s]?n[s]<100?r[s]="YY":r[s]="YYYY":12<n[s]&&n[s]<=31?(r[s]="dd",l=!0):r[s].length||(r[s]="mm")));if(l){for(s=0;s<u.length;s++)!1!==u[s]?12<d[s]&&"YY"!==r[s]&&"YYYY"!==r[s]&&(r[s]="YY"):12<d[s]&&"mm"===r[s]&&(r[s]="dd");return i=r.join("/"),(m.dateFormats||h.dateFormats)[i]?i:(w("invalidDateFormat"),x.error("Could not deduce date format"),o)}return o}function i(){}var p,c,s,h=this,m=e||this.options,o=m.csv,a=m.startRow||0,l=m.endRow||Number.MAX_VALUE,g=m.startColumn||0,y=m.endColumn||Number.MAX_VALUE,u=0,v=[],d={",":0,";":0,"\t":0};if(p=this.columns=[],o){s=o.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split(m.lineDelimiter||"\n"),(!a||a<0)&&(a=0),(!l||l>=s.length)&&(l=s.length-1),m.itemDelimiter?c=m.itemDelimiter:(c=null,c=n(s));var f=0;for(u=a;u<=l;u++)"#"===s[u][0]?f++:t(s[u],u-a-f);i(),m.columnTypes&&0!==m.columnTypes.length||!v.length||!v[0].length||"date"!==v[0][1]||m.dateFormat||(m.dateFormat=r(p[0])),this.dataFound()}return p},parseTable:function(){var e=this.options,t=e.table,r=this.columns,i=e.startRow||0,s=e.endRow||Number.MAX_VALUE,o=e.startColumn||0,a=e.endColumn||Number.MAX_VALUE;t&&("string"==typeof t&&(t=n.getElementById(t)),c(t.getElementsByTagName("tr"),function(e,n){i<=n&&n<=s&&c(e.children,function(e,t){("TD"===e.tagName||"TH"===e.tagName)&&o<=t&&t<=a&&(r[t-o]||(r[t-o]=[]),r[t-o][n-i]=e.innerHTML)})}),this.dataFound())},parseGoogleSpreadsheet:function(){var a,l,u=this,e=this.options,t=e.googleSpreadsheetKey,d=this.columns,h=e.startRow||0,m=e.endRow||Number.MAX_VALUE,f=e.startColumn||0,p=e.endColumn||Number.MAX_VALUE;t&&jQuery.ajax({dataType:"json",url:"https://spreadsheets.google.com/feeds/cells/"+t+"/"+(e.googleSpreadsheetWorksheet||"od6")+"/public/values?alt=json-in-script&callback=?",error:e.error,success:function(e){var t,n,r=e.feed.entry,i=r.length,s=0,o=0;for(n=0;n<i;n++)t=r[n],s=Math.max(s,t.gs$cell.col),o=Math.max(o,t.gs$cell.row);for(n=0;n<s;n++)f<=n&&n<=p&&(d[n-f]=[],d[n-f].length=Math.min(o,m-h));for(n=0;n<i;n++)t=r[n],a=t.gs$cell.row-1,l=t.gs$cell.col-1,f<=l&&l<=p&&h<=a&&a<=m&&(d[l-f][a-h]=t.content.$t);c(d,function(e){for(n=0;n<e.length;n++)e[n]===undefined&&(e[n]=null)}),u.dataFound()}})},trim:function(e,t){return"string"==typeof e&&(e=e.replace(/^\s+|\s+$/g,""),t&&/^[0-9\s]+$/.test(e)&&(e=e.replace(/\s/g,"")),this.decimalRegex&&(e=e.replace(this.decimalRegex,"$1.$2"))),e},parseTypes:function(){for(var e=this.columns,t=e.length;t--;)this.parseColumn(e[t],t)},parseColumn:function(e,t){var n,r,i,s,o,a,l,u=this.rawColumns,d=this.columns,h=e.length,m=this.firstRowAsNames,f=-1!==v(t,this.valueCount.xColumns),p=[],c=this.chartOptions,g=(this.options.columnTypes||[])[t],y=f&&(c&&c.xAxis&&"category"===F(c.xAxis)[0].type||"string"===g);for(u[t]||(u[t]=[]);h--;)n=p[h]||e[h],i=this.trim(n),s=this.trim(n,!0),r=parseFloat(s),u[t][h]===undefined&&(u[t][h]=i),y||0===h&&m?e[h]=""+i:+s===r?(31536e6<(e[h]=r)&&"float"!==g?e.isDatetime=!0:e.isNumeric=!0,e[h+1]!==undefined&&(l=r>e[h+1])):(o=this.parseDate(n),f&&Y(o)&&"float"!==g?(p[h]=n,e[h]=o,e.isDatetime=!0,e[h+1]!==undefined&&((a=o>e[h+1])!==l&&l!==undefined&&(this.alternativeFormat?(this.dateFormat=this.alternativeFormat,h=e.length,this.alternativeFormat=this.dateFormats[this.dateFormat].alternative):e.unsorted=!0),l=a)):(e[h]=""===i?null:i,0!==h&&(e.isDatetime||e.isNumeric)&&(e.mixed=!0)));if(f&&e.mixed&&(d[t]=u[t]),f&&l&&this.options.sort)for(t=0;t<d.length;t++)d[t].reverse(),m&&d[t].unshift(d[t].pop())},dateFormats:{"YYYY/mm/dd":{regex:/^([0-9]{4})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{1,2})$/,parser:function(e){return Date.UTC(+e[1],e[2]-1,+e[3])}},"dd/mm/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(e){return Date.UTC(+e[3],e[2]-1,+e[1])},alternative:"mm/dd/YYYY"},"mm/dd/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(e){return Date.UTC(+e[3],e[1]-1,+e[2])}},"dd/mm/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(e){var t=+e[3];return t>(new Date).getFullYear()-2e3?t+=1900:t+=2e3,Date.UTC(t,e[2]-1,+e[1])},alternative:"mm/dd/YY"},"mm/dd/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(e){return Date.UTC(+e[3]+2e3,e[1]-1,+e[2])}}},parseDate:function(e){var t,n,r,i,s=this.options.parseDate,o=this.options.dateFormat||this.dateFormat;if(s)t=s(e);else if("string"==typeof e){if(o)(r=this.dateFormats[o])||(r=this.dateFormats["YYYY/mm/dd"]),(i=e.match(r.regex))&&(t=r.parser(i));else for(n in this.dateFormats)if(r=this.dateFormats[n],i=e.match(r.regex)){this.dateFormat=o=n,this.alternativeFormat=r.alternative,t=r.parser(i);break}i||("object"==typeof(i=Date.parse(e))&&null!==i&&i.getTime?t=i.getTime()-6e4*i.getTimezoneOffset():Y(i)&&(t=i-6e4*new Date(i).getTimezoneOffset()))}return t},rowsToColumns:function(e){var t,n,r,i,s;if(e)for(s=[],n=e.length,t=0;t<n;t++)for(i=e[t].length,r=0;r<i;r++)s[r]||(s[r]=[]),s[r][t]=e[t][r];return s},parsed:function(){if(this.options.parsed)return this.options.parsed.call(this,this.columns)},getFreeIndexes:function(e,t){var n,r,i,s=[],o=[];for(r=0;r<e;r+=1)s.push(!0);for(n=0;n<t.length;n+=1)for(i=t[n].getReferencedColumnIndexes(),r=0;r<i.length;r+=1)s[i[r]]=!1;for(r=0;r<s.length;r+=1)s[r]&&o.push(r);return o},complete:function(){var e,t,n,r,i,s,o,a,l,u,d,h,m=this.columns,f=[],p=this.options,c=[];if(f.length=m.length,p.complete||p.afterComplete){for(r=0;r<m.length;r++)this.firstRowAsNames&&(m[r].name=m[r].shift());for(t=[],u=this.getFreeIndexes(m.length,this.valueCount.seriesBuilders),o=0;o<this.valueCount.seriesBuilders.length;o++)(l=this.valueCount.seriesBuilders[o]).populateColumns(u)&&c.push(l);for(;0<u.length;){for((l=new g).addColumnReader(0,"x"),-1!==(h=v(0,u))&&u.splice(h,1),r=0;r<this.valueCount.global;r++)l.addColumnReader(undefined,this.valueCount.globalPointArrayMap[r]);l.populateColumns(u)&&c.push(l)}if(0<c.length&&0<c[0].readers.length&&(d=m[c[0].readers[0].columnIndex])!==undefined&&(d.isDatetime?e="datetime":d.isNumeric||(e="category")),"category"===e)for(o=0;o<c.length;o++)for(l=c[o],s=0;s<l.readers.length;s++)"x"===l.readers[s].configName&&(l.readers[s].configName="name");for(o=0;o<c.length;o++){for(l=c[o],n=[],i=0;i<m[0].length;i++)n[i]=l.read(m,i);t[o]={data:n},l.name&&(t[o].name=l.name),"category"===e&&(t[o].turboThreshold=0)}a={series:t},e&&(a.xAxis={type:e},"category"===e&&(a.xAxis.uniqueNames=!1)),p.complete&&p.complete(a),p.afterComplete&&p.afterComplete(a)}},update:function(e,t){var n=this.chart;e&&(e.afterComplete=function(e){n.update(e,t)},x.data(e))}}),x.Data=a,x.data=function(e,t){return new a(e,t)},x.wrap(x.Chart.prototype,"init",function(r,i,s){var o=this;i&&i.data?(o.data=new a(x.extend(i.data,{afterComplete:function(e){var t,n;if(i.hasOwnProperty("series"))if("object"==typeof i.series)for(t=Math.max(i.series.length,e.series.length);t--;)n=i.series[t]||{},i.series[t]=x.merge(n,e.series[t]);else delete i.series;i=x.merge(e,i),r.call(o,i,s)}}),i),o.data.chart=o):r.call(o,i,s)}),(g=function(){this.readers=[],this.pointIsArray=!0}).prototype.populateColumns=function(t){var e=this,n=!0;return c(e.readers,function(e){e.columnIndex===undefined&&(e.columnIndex=t.shift())}),c(e.readers,function(e){e.columnIndex===undefined&&(n=!1)}),n},g.prototype.read=function(n,r){var e,t=this,i=t.pointIsArray,s=i?[]:{};return c(t.readers,function(e){var t=n[e.columnIndex][r];i?s.push(t):s[e.configName]=t}),this.name===undefined&&2<=t.readers.length&&2<=(e=t.getReferencedColumnIndexes()).length&&(e.shift(),e.sort(),this.name=n[e.shift()].name),s},g.prototype.addColumnReader=function(e,t){this.readers.push({columnIndex:e,configName:t}),"x"!==t&&"y"!==t&&t!==undefined&&(this.pointIsArray=!1)},g.prototype.getReferencedColumnIndexes=function(){var e,t,n=[];for(e=0;e<this.readers.length;e+=1)(t=this.readers[e]).columnIndex!==undefined&&n.push(t.columnIndex);return n},g.prototype.hasReader=function(e){var t;for(t=0;t<this.readers.length;t+=1)if(this.readers[t].configName===e)return!0}}(e)});