"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){var e,L,k,A,r,o,n,i=(L=(e=t).each,k=e.seriesTypes,A=e.stableSort,{translate:function(){k.column.prototype.translate.apply(this);var t,i,e,r,o,n,s=this,a=s.options,l=s.chart,p=s.points,h=p.length-1,u=a.onSeries,c=u&&l.get(u),f=a.onKey||"y",d=c&&c.options.step,b=c&&c.points,x=b&&b.length,m=s.xAxis,v=s.yAxis,g=m.getExtremes(),y=0;if(c&&c.visible&&x)for(y=(c.pointXOffset||0)+(c.barW||0)/2,n=c.currentDataGrouping,r=b[x-1].x+(n?n.totalRange:0),A(p,function(t,e){return t.x-e.x}),f="plot"+f[0].toUpperCase()+f.substr(1);x--&&p[h]&&(t=p[h],!((e=b[x]).x<=t.x&&e[f]!==undefined&&(t.x<=r&&(t.plotY=e[f],e.x<t.x&&!d&&(o=b[x+1])&&o[f]!==undefined&&(t.plotY+=(t.x-e.x)/(o.x-e.x)*(o[f]-e[f]))),x++,--h<0))););L(p,function(t,e){var r;t.plotY===undefined&&(t.x>=g.min&&t.x<=g.max?t.plotY=l.chartHeight-m.bottom-(m.opposite?m.height:0)+m.offset-v.top:t.shapeArgs={}),t.plotX+=y,(i=p[e-1])&&i.plotX===t.plotX&&(i.stackIndex===undefined&&(i.stackIndex=0),r=i.stackIndex+1),t.stackIndex=r})}});o=i,n=(r=t).each,(0,r.seriesType)("windbarb","column",{lineWidth:2,onSeries:null,states:{hover:{lineWidthPlus:0}},tooltip:{pointFormat:"<b>{series.name}</b>: {point.value} ({point.beaufort})<br/>"},vectorLength:20,yOffset:-20},{pointArrayMap:["value","direction"],parallelArrays:["x","value","direction"],beaufortName:["Calm","Light air","Light breeze","Gentle breeze","Moderate breeze","Fresh breeze","Strong breeze","Near gale","Gale","Strong gale","Storm","Violent storm","Hurricane"],beaufortFloor:[0,.3,1.6,3.4,5.5,8,10.8,13.9,17.2,20.8,24.5,28.5,32.7],trackerGroups:["markerGroup"],pointAttribs:function(t,e){var r=this.options,i=this.color,o=this.options.lineWidth;return e&&(i=r.states[e].color||i,o=(r.states[e].lineWidth||o)+(r.states[e].lineWidthPlus||0)),{stroke:i,"stroke-width":o}},markerAttribs:function(){return undefined},windArrow:function(t){var e,r,i=1.943844*t.value,o=t.beaufortLevel,n=this.options.vectorLength/20,s=-10;if(t.isNull)return[];if(0===o)return this.chart.renderer.symbols.circle(-10*n,-10*n,20*n,20*n);if(e=["M",0,7*n,"L",-1.5*n,7*n,0,10*n,1.5*n,7*n,0,7*n,0,-10*n],0<(r=(i-i%50)/50))for(;r--;)e.push(-10===s?"L":"M",0,s*n,"L",5*n,s*n+2,"L",0,s*n+4),i-=50,s+=7;if(0<(r=(i-i%10)/10))for(;r--;)e.push(-10===s?"L":"M",0,s*n,"L",7*n,s*n),i-=10,s+=3;if(0<(r=(i-i%5)/5))for(;r--;)e.push(-10===s?"L":"M",0,s*n,"L",4*n,s*n),i-=5,s+=3;return e},translate:function(){var r=this.beaufortFloor,i=this.beaufortName;o.translate.call(this),n(this.points,function(t){for(var e=0;e<r.length&&!(r[e]>t.value);e++);t.beaufortLevel=e-1,t.beaufort=i[e-1]})},drawPoints:function(){var i=this.chart,o=this.yAxis;n(this.points,function(t){var e=t.plotX,r=t.plotY;t.graphic||(t.graphic=this.chart.renderer.path().add(this.markerGroup)),t.graphic.attr({d:this.windArrow(t),translateX:e,translateY:r+this.options.yOffset,rotation:t.direction}).attr(this.pointAttribs(t)),t.tooltipPos=i.inverted?[o.len+o.pos-i.plotLeft-r,this.xAxis.len-e]:[e,r+o.pos-i.plotTop+this.options.yOffset-this.options.vectorLength/2]},this)},animate:function(t){t?this.markerGroup.attr({opacity:.01}):(this.markerGroup.animate({opacity:1},r.animObject(this.options.animation)),this.animate=null)}},{isValid:function(){return r.isNumber(this.value)&&0<=this.value}})});