"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){var e,a,s,n,i,r,o,l,u,p,h,d,y,c,x,g,f,M,P,v,m,b,A;a=(e=t).defined,s=e.each,n=e.noop,i=e.seriesTypes,e.colorPointMixin={isValid:function(){return null!==this.value},setVisible:function(t){var e=this,a=t?"show":"hide";s(["graphic","dataLabel"],function(t){e[t]&&e[t][a]()})},setState:function(t){e.Point.prototype.setState.call(this,t),this.graphic&&this.graphic.attr({zIndex:"hover"===t?1:0})}},e.colorSeriesMixin={pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:n,parallelArrays:["x","y","value"],colorKey:"value",pointAttribs:i.column.prototype.pointAttribs,translateColors:function(){var n=this,i=this.options.nullColor,r=this.colorAxis,o=this.colorKey;s(this.data,function(t){var e,a=t[o];(e=t.options.color||(t.isNull?i:r&&a!==undefined?r.toColor(a,t):t.color||n.color))&&(t.color=e)})},colorAttribs:function(t){var e={};return a(t.color)&&(e[this.colorProp||"fill"]=t.color),e}},o=(r=t).colorPointMixin,l=r.colorSeriesMixin,u=r.each,p=r.LegendSymbolMixin,h=r.merge,d=r.noop,y=r.pick,c=r.Series,x=r.seriesType,g=r.seriesTypes,x("heatmap","scatter",{animation:!1,borderWidth:0,nullColor:"#f7f7f7",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{halo:!1,brightness:.2}}},h(l,{pointArrayMap:["y","value"],hasPointSpecificOptions:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var t;g.scatter.prototype.init.apply(this,arguments),(t=this.options).pointRange=y(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1},translate:function(){var t=this,l=t.options,p=t.xAxis,h=t.yAxis,d=l.pointPadding||0,c=function(t,e,a){return Math.min(Math.max(e,t),a)};t.generatePoints(),u(t.points,function(t){var e=(l.colsize||1)/2,a=(l.rowsize||1)/2,n=c(Math.round(p.len-p.translate(t.x-e,0,1,0,1)),-p.len,2*p.len),i=c(Math.round(p.len-p.translate(t.x+e,0,1,0,1)),-p.len,2*p.len),r=c(Math.round(h.translate(t.y-a,0,1,0,1)),-h.len,2*h.len),o=c(Math.round(h.translate(t.y+a,0,1,0,1)),-h.len,2*h.len),s=y(t.pointPadding,d);t.plotX=t.clientX=(n+i)/2,t.plotY=(r+o)/2,t.shapeType="rect",t.shapeArgs={x:Math.min(n,i)+s,y:Math.min(r,o)+s,width:Math.abs(i-n)-2*s,height:Math.abs(o-r)-2*s}}),t.translateColors()},drawPoints:function(){g.column.prototype.drawPoints.call(this),u(this.points,function(t){t.graphic.attr(this.colorAttribs(t))},this)},animate:d,getBox:d,drawLegendSymbol:p.drawRectangle,alignDataLabel:g.column.prototype.alignDataLabel,getExtremes:function(){c.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,c.prototype.getExtremes.call(this)}}),r.extend({haloPath:function(t){if(!t)return[];var e=this.shapeArgs;return["M",e.x-t,e.y-t,"L",e.x-t,e.y+e.height+t,e.x+e.width+t,e.y+e.height+t,e.x+e.width+t,e.y-t,"Z"]}},o)),M=(f=t).seriesType,P=f.each,v=f.reduce,m=f.pick,b=function(t,e,a){return Math.min(Math.max(e,t),a)},A=function(t,e,a){var n=t.options;return{xPad:(n.colsize||1)/-e,yPad:(n.rowsize||1)/-a}},f.tileShapeTypes={hexagon:{alignDataLabel:f.seriesTypes.scatter.prototype.alignDataLabel,getSeriesPadding:function(t){return A(t,3,2)},haloPath:function(t){if(!t)return[];var e=this.tileEdges;return["M",e.x2-t,e.y1+t,"L",e.x3+t,e.y1+t,e.x4+1.5*t,e.y2,e.x3+t,e.y3-t,e.x2-t,e.y3-t,e.x1-1.5*t,e.y2,"Z"]},translate:function(){var u,t=this,e=t.options,y=t.xAxis,x=t.yAxis,g=e.pointPadding||0,f=(e.colsize||1)/3,M=(e.rowsize||1)/2;t.generatePoints(),P(t.points,function(t){var e=b(Math.floor(y.len-y.translate(t.x-2*f,0,1,0,1)),-y.len,2*y.len),a=b(Math.floor(y.len-y.translate(t.x-f,0,1,0,1)),-y.len,2*y.len),n=b(Math.floor(y.len-y.translate(t.x+f,0,1,0,1)),-y.len,2*y.len),i=b(Math.floor(y.len-y.translate(t.x+2*f,0,1,0,1)),-y.len,2*y.len),r=b(Math.floor(x.translate(t.y-M,0,1,0,1)),-x.len,2*x.len),o=b(Math.floor(x.translate(t.y,0,1,0,1)),-x.len,2*x.len),s=b(Math.floor(x.translate(t.y+M,0,1,0,1)),-x.len,2*x.len),l=m(t.pointPadding,g),p=l*Math.abs(a-e)/Math.abs(s-o),h=y.reversed?-p:p,d=y.reversed?-l:l,c=x.reversed?-l:l;t.x%2&&(r+=u=u||Math.round(Math.abs(s-r)/2)*(x.reversed?-1:1),o+=u,s+=u),t.plotX=t.clientX=(a+n)/2,t.plotY=o,e+=h+d,a+=d,n-=d,i-=h+d,r-=c,s+=c,t.tileEdges={x1:e,x2:a,x3:n,x4:i,y1:r,y2:o,y3:s},t.shapeType="path",t.shapeArgs={d:["M",a,r,"L",n,r,i,o,n,s,a,s,e,o,"Z"]}}),t.translateColors()}},diamond:{alignDataLabel:f.seriesTypes.scatter.prototype.alignDataLabel,getSeriesPadding:function(t){return A(t,2,2)},haloPath:function(t){if(!t)return[];var e=this.tileEdges;return["M",e.x2,e.y1+t,"L",e.x3+t,e.y2,e.x2,e.y3-t,e.x1-t,e.y2,"Z"]},translate:function(){var d,t=this,e=t.options,c=t.xAxis,u=t.yAxis,y=e.pointPadding||0,x=e.colsize||1,g=(e.rowsize||1)/2;t.generatePoints(),P(t.points,function(t){var e=b(Math.round(c.len-c.translate(t.x-x,0,1,0,0)),-c.len,2*c.len),a=b(Math.round(c.len-c.translate(t.x,0,1,0,0)),-c.len,2*c.len),n=b(Math.round(c.len-c.translate(t.x+x,0,1,0,0)),-c.len,2*c.len),i=b(Math.round(u.translate(t.y-g,0,1,0,0)),-u.len,2*u.len),r=b(Math.round(u.translate(t.y,0,1,0,0)),-u.len,2*u.len),o=b(Math.round(u.translate(t.y+g,0,1,0,0)),-u.len,2*u.len),s=m(t.pointPadding,y),l=s*Math.abs(a-e)/Math.abs(o-r),p=c.reversed?-l:l,h=u.reversed?-s:s;t.x%2&&(i+=d=Math.abs(o-i)/2*(u.reversed?-1:1),r+=d,o+=d),t.plotX=t.clientX=a,t.plotY=r,e+=p,n-=p,i-=h,o+=h,t.tileEdges={x1:e,x2:a,x3:n,y1:i,y2:r,y3:o},t.shapeType="path",t.shapeArgs={d:["M",a,i,"L",n,r,a,o,e,r,"Z"]}}),t.translateColors()}},circle:{alignDataLabel:f.seriesTypes.scatter.prototype.alignDataLabel,getSeriesPadding:function(t){return A(t,2,2)},haloPath:function(t){return f.seriesTypes.scatter.prototype.pointClass.prototype.haloPath.call(this,t+(t&&this.radius))},translate:function(){var r,o,s,l,t=this,e=t.options,p=t.xAxis,h=t.yAxis,d=e.pointPadding||0,c=(e.rowsize||1)/2,u=e.colsize||1,y=!1;t.generatePoints(),P(t.points,function(t){var e=b(Math.round(p.len-p.translate(t.x,0,1,0,0)),-p.len,2*p.len),a=b(Math.round(h.translate(t.y,0,1,0,0)),-h.len,2*h.len),n=d,i=!1;t.pointPadding!==undefined&&(n=t.pointPadding,y=i=!0),l&&!y||(r=Math.abs(b(Math.floor(p.len-p.translate(t.x+u,0,1,0,0)),-p.len,2*p.len)-e),o=Math.abs(b(Math.floor(h.translate(t.y+c,0,1,0,0)),-h.len,2*h.len)-a),s=Math.floor(Math.sqrt(r*r+o*o)/2),l=Math.min(r,s,o)-n,y&&!i&&(y=!1)),t.x%2&&(a+=o*(h.reversed?-1:1)),t.plotX=t.clientX=e,t.plotY=a,t.radius=l,t.shapeType="circle",t.shapeArgs={x:e,y:a,r:l}}),t.translateColors()}},square:{alignDataLabel:f.seriesTypes.heatmap.prototype.alignDataLabel,translate:f.seriesTypes.heatmap.prototype.translate,getSeriesPadding:function(){},haloPath:f.seriesTypes.heatmap.prototype.pointClass.prototype.haloPath}},f.wrap(f.Axis.prototype,"setAxisTranslation",function(t){t.apply(this,Array.prototype.slice.call(arguments,1));var e=this,a=v(f.map(e.series,function(t){return t.getSeriesPixelPadding&&t.getSeriesPixelPadding(e)}),function(t,e){return(t&&t.padding)>(e&&e.padding)?t:e})||{padding:0,axisLengthFactor:1},n=Math.round(a.padding*a.axisLengthFactor);a.padding&&(e.len-=n,t.apply(e,Array.prototype.slice.call(arguments,1)),e.minPixelPadding+=a.padding,e.len+=n)}),M("tilemap","heatmap",{states:{hover:{halo:{enabled:!0,size:2,opacity:.5,attributes:{zIndex:3}}}},pointPadding:2,tileShape:"hexagon"},{setOptions:function(){var t=f.seriesTypes.heatmap.prototype.setOptions.apply(this,Array.prototype.slice.call(arguments));return this.tileShape=f.tileShapeTypes[t.tileShape],t},alignDataLabel:function(){return this.tileShape.alignDataLabel.apply(this,Array.prototype.slice.call(arguments))},getSeriesPixelPadding:function(t){var e,a,n=t.isXAxis,i=this.tileShape.getSeriesPadding(this);return i?(e=Math.round(t.translate(n?2*i.xPad:i.yPad,0,1,0,1)),a=Math.round(t.translate(n?i.xPad:0,0,1,0,1)),{padding:Math.abs(e-a)||0,axisLengthFactor:n?2:1.1}):{padding:0,axisLengthFactor:1}},translate:function(){return this.tileShape.translate.apply(this,Array.prototype.slice.call(arguments))}},f.extend({haloPath:function(){return this.series.tileShape.haloPath.apply(this,Array.prototype.slice.call(arguments))}},f.colorPointMixin))});