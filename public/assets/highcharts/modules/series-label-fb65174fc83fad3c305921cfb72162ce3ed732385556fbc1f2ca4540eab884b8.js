"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){!function(n){function s(t,e,o,r,i,a){var h=(a-e)*(o-t)-(r-e)*(i-t);return 0<h||!(h<0)}function c(t,e,o,r,i,a,h,n){return s(t,e,i,a,h,n)!==s(o,r,i,a,h,n)&&s(t,e,o,r,i,a)!==s(t,e,o,r,h,n)}function X(t,e,o,r,i,a,h,n){return c(t,e,t+o,e,i,a,h,n)||c(t+o,e,t+o,e+r,i,a,h,n)||c(t,e+r,t+o,e+r,i,a,h,n)||c(t,e,t,e+r,i,a,h,n)}function t(t){var i=this,a=Math.max(n.animObject(i.renderer.globalAnimation).duration,250),h=!i.hasRendered;t.apply(i,[].slice.call(arguments,1)),i.labelSeries=[],i.labelSeriesMaxSum=0,clearTimeout(i.seriesLabelTimer),o(i.series,function(t){var e=t.options.label,o=t.labelBySeries,r=o&&o.closest;e.enabled&&t.visible&&(t.graph||t.area)&&!t.isSeriesBoosting&&(i.labelSeries.push(t),e.minFontSize&&e.maxFontSize&&(t.sum=n.reduce(t.yData,function(t,e){return(t||0)+(e||0)},0),i.labelSeriesMaxSum=Math.max(i.labelSeriesMaxSum,t.sum)),h&&(a=Math.max(a,n.animObject(t.options.animation).duration)),r&&(r[0].plotX!==undefined?o.animate({x:r[0].plotX+r[1],y:r[0].plotY+r[2]}):o.attr({opacity:0})))}),i.seriesLabelTimer=n.syncTimeout(function(){i.drawSeriesLabels()},i.renderer.forExport?0:a)}var S=3,e=n.wrap,o=n.each,v=n.extend,w=n.isNumber,P=n.pick,r=n.Series,i=n.SVGRenderer,a=n.Chart;n.setOptions({plotOptions:{series:{label:{enabled:!0,connectorAllowed:!0,connectorNeighbourDistance:24,minFontSize:null,maxFontSize:null,onArea:null,style:{fontWeight:"bold"},boxesToAvoid:[]}}}}),i.prototype.symbols.connector=function(t,e,o,r,i){var a,h,n=i&&i.anchorX,s=i&&i.anchorY,c=o/2;return w(n)&&w(s)&&(a=["M",n,s],(h=e-s)<0&&(h=-r-h),h<o&&(c=n<t+o/2?h:o-h),e+r<s?a.push("L",t+c,e+r):s<e?a.push("L",t+c,e):n<t?a.push("L",t,e+r/2):t+o<n&&a.push("L",t+o,e+r/2)),a||[]},r.prototype.getPointsOnGraph=function(){if(this.xAxis||this.yAxis){var t,e,o,r,i,a,h,n,s,c,l=16,p=this.points,u=[],d=this.graph||this.area,x=d.element,b=this.chart.inverted,f=this.xAxis,g=this.yAxis,y=b?g.pos:f.pos,m=b?f.pos:g.pos,Y=P(this.options.label.onArea,!!this.area),X=g.getThreshold(this.options.threshold);if(this.getPointSpline&&x.getPointAtLength&&!Y){for(d.toD&&(c=d.attr("d"),d.attr({d:d.toD})),h=x.getTotalLength(),o=0;o<h;o+=l)t=x.getPointAtLength(o),u.push({chartX:y+t.x,chartY:m+t.y,plotX:t.x,plotY:t.y});c&&d.attr({d:c}),(t=p[p.length-1]).chartX=y+t.plotX,t.chartY=m+t.plotY,u.push(t)}else for(h=p.length,o=0;o<h;o+=1){if(t=p[o],e=p[o-1],t.chartX=y+t.plotX,t.chartY=m+t.plotY,Y&&(t.chartCenterY=m+(t.plotY+P(t.yBottom,X))/2),0<o&&(r=Math.abs(t.chartX-e.chartX),i=Math.abs(t.chartY-e.chartY),l<(a=Math.max(r,i))))for(n=Math.ceil(a/l),s=1;s<n;s+=1)u.push({chartX:e.chartX+(t.chartX-e.chartX)*(s/n),chartY:e.chartY+(t.chartY-e.chartY)*(s/n),chartCenterY:e.chartCenterY+(t.chartCenterY-e.chartCenterY)*(s/n),plotX:e.plotX+(t.plotX-e.plotX)*(s/n),plotY:e.plotY+(t.plotY-e.plotY)*(s/n)});w(t.plotY)&&u.push(t)}return u}},r.prototype.labelFontSize=function(t,e){return t+this.sum/this.chart.labelSeriesMaxSum*(e-t)+"px"},r.prototype.checkClearPoint=function(t,e,o,r){function i(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}function a(t,e){return t-e}var h,n,s,c,l,p,u,d,x,b=Number.MAX_VALUE,f=Number.MAX_VALUE,g=this.options.label.connectorAllowed,y=P(this.options.label.onArea,!!this.area),m=this.chart,Y=16;for(d=0;d<m.boxesToAvoid.length;d+=1)if(i(m.boxesToAvoid[d],{left:t,right:t+o.width,top:e,bottom:e+o.height}))return!1;for(d=0;d<m.series.length;d+=1)if(c=(s=m.series[d]).interpolatedPoints,s.visible&&c){for(x=1;x<c.length;x+=1){if(c[x].chartX>=t-Y&&c[x-1].chartX<=t+o.width+Y){if(X(t,e,o.width,o.height,c[x-1].chartX,c[x-1].chartY,c[x].chartX,c[x].chartY))return!1;this===s&&!l&&r&&(l=X(t-Y,e-Y,o.width+2*Y,o.height+2*Y,c[x-1].chartX,c[x-1].chartY,c[x].chartX,c[x].chartY))}!g&&!l||this===s&&!y||(p=t+o.width/2-c[x].chartX,u=e+o.height/2-c[x].chartY,b=Math.min(b,p*p+u*u))}if(!y&&g&&this===s&&(r&&!l||b<Math.pow(this.options.label.connectorNeighbourDistance,2))){for(x=1;x<c.length;x+=1)(h=Math.min(Math.pow(t+o.width/2-c[x].chartX,2)+Math.pow(e+o.height/2-c[x].chartY,2),Math.pow(t-c[x].chartX,2)+Math.pow(e-c[x].chartY,2),Math.pow(t+o.width-c[x].chartX,2)+Math.pow(e-c[x].chartY,2),Math.pow(t+o.width-c[x].chartX,2)+Math.pow(e+o.height-c[x].chartY,2),Math.pow(t-c[x].chartX,2)+Math.pow(e+o.height-c[x].chartY,2)))<f&&(f=h,n=c[x]);l=!0}}return!(r&&!l)&&{x:t,y:e,weight:a(b,n?f:0),connectorPoint:n}},a.prototype.drawSeriesLabels=function(){var M=this,t=this.labelSeries;M.boxesToAvoid=[],o(t,function(t){t.interpolatedPoints=t.getPointsOnGraph(),o(t.options.label.boxesToAvoid||[],function(t){M.boxesToAvoid.push(t)})}),o(M.series,function(t){function e(t,e,o){return p<t&&t<=p+d-o.width&&u<=e&&e<=u+x-o.height}if(t.xAxis||t.yAxis){var o,r,i,a,h,n,s=[],c=t.options.label,l=M.inverted,p=l?t.yAxis.pos:t.xAxis.pos,u=l?t.xAxis.pos:t.yAxis.pos,d=M.inverted?t.yAxis.len:t.xAxis.len,x=M.inverted?t.xAxis.len:t.yAxis.len,b=t.interpolatedPoints,f=P(c.onArea,!!t.area),g=t.labelBySeries,y=c.minFontSize,m=c.maxFontSize;if(t.visible&&!t.isSeriesBoosting&&b){for(g||(t.labelBySeries=g=M.renderer.label(t.name,0,-9999,"connector").css(v({color:f?M.renderer.getContrast(t.color):t.color},t.options.label.style)),y&&m&&g.css({fontSize:t.labelFontSize(y,m)}),g.attr({padding:0,opacity:M.renderer.forExport?1:0,stroke:t.color,"stroke-width":1,zIndex:3}).add(t.group).animate({opacity:1},{duration:200})),(o=g.getBBox()).width=Math.round(o.width),h=b.length-1;0<h;h-=1)f?e(r=b[h].chartX-o.width/2,i=b[h].chartCenterY-o.height/2,o)&&(n=t.checkClearPoint(r,i,o)):(e(r=b[h].chartX+S,i=b[h].chartY-o.height-S,o)&&(n=t.checkClearPoint(r,i,o)),n&&s.push(n),e(r=b[h].chartX+S,i=b[h].chartY+S,o)&&(n=t.checkClearPoint(r,i,o)),n&&s.push(n),e(r=b[h].chartX-o.width-S,i=b[h].chartY+S,o)&&(n=t.checkClearPoint(r,i,o)),n&&s.push(n),e(r=b[h].chartX-o.width-S,i=b[h].chartY-o.height-S,o)&&(n=t.checkClearPoint(r,i,o))),n&&s.push(n);if(!s.length&&!f)for(r=p+d-o.width;p<=r;r-=16)for(i=u;i<u+x-o.height;i+=16)(a=t.checkClearPoint(r,i,o,!0))&&s.push(a);if(s.length){s.sort(function(t,e){return e.weight-t.weight}),n=s[0],M.boxesToAvoid.push({left:n.x,right:n.x+o.width,top:n.y,bottom:n.y+o.height});var Y=Math.sqrt(Math.pow(Math.abs(n.x-g.x),2),Math.pow(Math.abs(n.y-g.y),2));if(Y){var X={opacity:M.renderer.forExport?1:0,x:n.x-p,y:n.y-u},w={opacity:1};Y<=10&&(w={x:X.x,y:X.y},X={}),t.labelBySeries.attr(v(X,{anchorX:n.connectorPoint&&n.connectorPoint.plotX,anchorY:n.connectorPoint&&n.connectorPoint.plotY})).animate(w),t.options.kdNow=!0,t.buildKDTree();var A=t.searchPoint({chartX:n.x,chartY:n.y},!0);g.closest=[A,n.x-p-A.plotX,n.y-u-A.plotY]}}else g&&(t.labelBySeries=g.destroy())}}})},e(a.prototype,"render",t),e(a.prototype,"redraw",t)}(t)});