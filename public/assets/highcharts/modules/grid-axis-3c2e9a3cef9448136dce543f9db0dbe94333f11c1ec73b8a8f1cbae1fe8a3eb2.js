"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){var e,i,r,h,p,a,o,s,n,u;i=(e=t).dateFormat,r=e.each,h=e.isObject,p=e.pick,a=e.wrap,o=e.Axis,s=e.Chart,n=e.Tick,u={top:0,right:1,bottom:2,left:3,0:"top",1:"right",2:"bottom",3:"left"},o.prototype.isOuterAxis=function(){var i=this,a=-1,o=!0;return r(this.chart.axes,function(t,e){if(t.side===i.side)if(t===i)a=e;else if(0<=a&&a<e)return void(o=!1)}),o},n.prototype.getLabelWidth=function(){return this.label.getBBox().width},o.prototype.getMaxLabelLength=function(t){var e=this.tickPositions,i=this.ticks,a=0;return this.maxLabelLength&&!t||(r(e,function(t){(t=i[t])&&t.labelLength>a&&(a=t.labelLength)}),this.maxLabelLength=a),this.maxLabelLength},o.prototype.addTitle=function(){var t,e,i,a=this,o=a.chart.renderer,r=a.axisParent,s=a.horiz,n=a.opposite,l=a.options,h=l.title;t=a.hasData(),a.showAxis=e=t||p(l.showEmpty,!0),l.title="",a.axisTitle||((i=h.textAlign)||(i=(s?{low:"left",middle:"center",high:"right"}:{low:n?"right":"left",middle:"center",high:n?"left":"right"})[h.align]),a.axisTitle=o.text(h.text,0,0,h.useHTML).attr({zIndex:7,rotation:h.rotation||0,align:i}).addClass("highcharts-axis-title").css(h.style).add(r),a.axisTitle.isNew=!0),a.axisTitle[e?"show":"hide"](!0)},e.dateFormats={W:function(t){var e,i=new Date(t),a=0===i.getUTCDay()?7:i.getUTCDay(),o=i.getTime(),r=new Date(i.getUTCFullYear(),0,1,-6);return i.setDate(i.getUTCDate()+4-a),e=Math.floor((o-r)/864e5),1+Math.floor(e/7)},E:function(t){return i("%a",t,!0).charAt(0)}},a(n.prototype,"addLabel",function(t){var e=this.axis,i=e.options.categories!==undefined,a=e.tickPositions,o=a[a.length-1],r=this.pos!==o;(!e.options.grid||i||r)&&t.apply(this)}),a(n.prototype,"getLabelPosition",function(t,e,i,a){var o,r,s,n,l,h,p,d,c=t.apply(this,Array.prototype.slice.call(arguments,1)),x=this.axis,g=x.options,f=g.tickInterval||1;return g.grid&&(n=g.labels.style.fontSize,h=(l=x.chart.renderer.fontMetrics(n,a)).b,p=l.h,x.horiz&&g.categories===undefined?(s=x.axisGroup.getBBox().height,r=this.pos+f/2,c.x=x.translate(r)+x.left,d=s/2+p/2-Math.abs(p-h),x.side===u.top?c.y=i-d:c.y=i+d):(g.categories===undefined&&(r=this.pos+f/2,c.y=x.translate(r)+x.top+h/2),o=this.getLabelWidth()/2-x.maxLabelLength/2,x.side===u.left?c.x+=o:c.x-=o)),c}),a(o.prototype,"tickSize",function(t){var e,i,a=this,o=t.apply(a,Array.prototype.slice.call(arguments,1));return a.options.grid&&!a.horiz&&(e=2*Math.abs(a.defaultLeftAxisOptions.labels.x),a.maxLabelLength||(a.maxLabelLength=a.getMaxLabelLength()),i=a.maxLabelLength+e,o[0]=i),o}),a(o.prototype,"getOffset",function(t){var e,i,a=this,o=a.chart.axisOffset,r=a.side,s=a.options,n=s.title,l=n&&n.text&&!1!==n.enabled;a.options.grid&&h(a.options.title)?(i=a.tickSize("tick")[0],o[r]&&i&&(e=o[r]+i),l&&a.addTitle(),t.apply(a,Array.prototype.slice.call(arguments,1)),o[r]=p(e,o[r]),s.title=n):t.apply(a,Array.prototype.slice.call(arguments,1))}),a(o.prototype,"renderUnsquish",function(t){this.options.grid&&(this.labelRotation=0,this.options.labels.rotation=0),t.apply(this)}),a(o.prototype,"setOptions",function(t,e){var i=this;e.grid&&i.horiz&&(e.startOnTick=!0,e.minPadding=0,e.endOnTick=!0),t.apply(this,Array.prototype.slice.call(arguments,1))}),a(o.prototype,"render",function(t){var e,i,a,o,r,s,n,l,h,p=this,d=p.options,c=p.chart.renderer;d.grid?(e=2*Math.abs(p.defaultLeftAxisOptions.labels.x),i=p.maxLabelLength+e,a=d.lineWidth,p.rightWall&&p.rightWall.destroy(),t.apply(p),h=p.axisGroup.getBBox(),p.horiz&&(p.rightWall=c.path(["M",h.x+p.width+1,h.y,"L",h.x+p.width+1,h.y+h.height]).attr({stroke:d.tickColor||"#ccd6eb","stroke-width":d.tickWidth||1,zIndex:7,"class":"grid-wall"}).add(p.axisGroup)),p.isOuterAxis()&&p.axisLine&&(p.horiz&&(i=h.height-1),a&&(n=(o=p.getLinePath(a)).indexOf("M")+1,l=o.indexOf("L")+1,r=o.indexOf("M")+2,s=o.indexOf("L")+2,p.side!==u.top&&p.side!==u.left||(i=-i),p.horiz?(o[r]=o[r]+i,o[s]=o[s]+i):(o[n]=o[n]+i,o[l]=o[l]+i),p.axisLineExtra?p.axisLineExtra.animate({d:o}):p.axisLineExtra=c.path(o).attr({stroke:d.lineColor,"stroke-width":a,zIndex:7}).add(p.axisGroup),p.axisLine[p.showAxis?"show":"hide"](!0)))):t.apply(p)}),a(s.prototype,"render",function(t){var i,a,o=25/11;r(this.axes,function(t){var e=t.options;e.grid&&(a=e.labels.style.fontSize,i=t.chart.renderer.fontMetrics(a),"datetime"===e.type&&(e.units=[["millisecond",[1]],["second",[1]],["minute",[1]],["hour",[1]],["day",[1]],["week",[1]],["month",[1]],["year",null]]),t.horiz?e.tickLength=e.cellHeight||i.h*o:(e.tickWidth=1,e.lineWidth||(e.lineWidth=1)))}),t.apply(this)})});