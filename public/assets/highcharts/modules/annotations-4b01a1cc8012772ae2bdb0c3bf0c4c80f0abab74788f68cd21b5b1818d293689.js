"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){!function(s){var d=s.merge,t=s.addEvent,c=s.extend,p=s.each,e=s.isString,u=s.isNumber,f=s.defined,r=s.isObject,n=s.inArray,o=s.erase,a=s.find,h=s.format,g=s.pick,i=s.destroyObjectProperties,m=s.Tooltip.prototype,l=s.Series.prototype,y=s.Chart.prototype,b={arrow:{render:!1,id:"arrow",refY:5,refX:5,markerWidth:10,markerHeight:10,children:[{tagName:"path",attrs:{d:"M 0 0 L 10 5 L 0 10 Z",strokeWidth:0}}]}},x={markerSetter:function(i){return function(t){this.attr(i,"url(#"+t+")")}}};c(x,{markerEndSetter:x.markerSetter("marker-end"),markerStartSetter:x.markerSetter("marker-start")}),s.SVGRenderer.prototype.addMarker=function(t,i){var e=g(t,s.uniqueKey()),r=this.createElement("marker").attr({id:e,markerWidth:g(i.markerWidth,20),markerHeight:g(i.markerHeight,20),refX:i.refX||0,refY:i.refY||0,orient:i.orient||"auto"}).add(this.defs),o={stroke:i.color||"none",fill:i.color||"rgba(0, 0, 0, 0.75)"},n=i.children;return r.id=e,p(n,function(t){this.createElement(t.tagName).attr(d(o,t.attrs)).add(r)},this),r};var k=s.MockPoint=function(t,i){this.mock=!0,this.series={visible:!0,chart:t,getPlotBox:l.getPlotBox},this.init(t,i)},v=s.mockPoint=function(t,i){return new k(t,i)};k.prototype={init:function(t,i){var e=i.xAxis,r=f(e)?t.xAxis[e]||t.get(e):null,o=i.yAxis,n=f(o)?t.yAxis[o]||t.get(o):null;r?(this.x=i.x,this.series.xAxis=r):this.plotX=i.x,n?(this.y=i.y,this.series.yAxis=n):this.plotY=i.y},translate:function(){var t=this.series,i=t.xAxis,e=t.yAxis,r=this.plotX,o=this.plotY,n=!0;i&&(this.plotX=r=i.toPixels(this.x,!0),n=0<=r&&r<=i.len),e&&(this.plotY=o=e.toPixels(this.y,!0),n=n&&0<=o&&o<=e.len),this.isInside=n},alignToBox:function(t){t&&this.translate();var i,e=this.plotX,r=this.plotY;return this.series.chart.inverted&&(i=e,e=r,r=i),[e,r,0,0]},getLabelConfig:function(){return{x:this.x,y:this.y,point:this}}},s.defaultOptions.annotations=[];var w=s.Annotation=function(t,i){this.chart=t,this.labels=[],this.shapes=[],this.options=d(this.defaultOptions,i),this.init(t,i)};w.prototype={shapesWithoutBackground:["connector"],attrsMap:{backgroundColor:"fill",borderColor:"stroke",borderWidth:"stroke-width",strokeWidth:"stroke-width",stroke:"stroke",fill:"fill",zIndex:"zIndex",width:"width",height:"height",borderRadius:"r",r:"r",padding:"padding",dashStyle:"dashstyle"},defaultOptions:{visible:!0,labelOptions:{align:"center",allowOverlap:!1,backgroundColor:"rgba(0, 0, 0, 0.75)",borderColor:"black",borderRadius:1,borderWidth:1,crop:!1,formatter:function(){return f(this.y)?this.y:"Annotation label"},overflow:"justify",padding:5,shadow:!1,shape:"callout",style:{fontSize:"11px",fontWeight:"normal",color:"contrast"},useHTML:!1,verticalAlign:"bottom",x:0,y:-16},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1,fill:"rgba(0, 0, 0, 0.75)",r:0},zIndex:6},init:function(){var t=this;p(this.options.labels||[],this.initLabel,this),p(this.options.shapes||[],this.initShape,this),this.chart.labelCollectors.push(function(){var i=[];return p(t.labels,function(t){t.options.allowOverlap||i.push(t)}),i})},redraw:function(){this.group||this.render(),this.redrawItems(this.shapes),this.redrawItems(this.labels)},redrawItems:function(t){for(var i=t.length;i--;)this.redrawItem(t[i])},render:function(){var t=this.chart.renderer,i=this.group=t.g("annotation").attr({zIndex:this.options.zIndex,visibility:this.options.visible?"visible":"hidden"}).add();this.shapesGroup=t.g("annotation-shapes").add(i),this.labelsGroup=t.g("annotation-labels").attr({translateX:0,translateY:0}).add(i),this.shapesGroup.clip(this.chart.plotBoxClip)},setVisible:function(t){var i=this.options,e=g(t,!i.visible);this.group.attr({visibility:e?"visible":"hidden"}),i.visible=e},destroy:function(){var t=this.chart;p(this.labels,function(t){t.destroy()}),p(this.shapes,function(t){t.destroy()}),i(this,t)},initShape:function(t){var i=this.chart.renderer,e=d(this.options.shapeOptions,t),r=this.attrsFromOptions(e),o=i[e.type]?e.type:"rect",n=i[o](0,-9e9,0,0);n.points=[],n.type=o,n.options=e,n.itemType="shape","path"===o&&c(n,{markerStartSetter:x.markerStartSetter,markerEndSetter:x.markerEndSetter,markerStart:x.markerStart,markerEnd:x.markerEnd}),n.attr(r),this.shapes.push(n)},initLabel:function(t){var i=d(this.options.labelOptions,t),e=i.style,r=this.attrsFromOptions(i),o=this.chart.renderer.label("",0,-9e9,i.shape,null,null,i.useHTML,null,"annotation-label");"contrast"===e.color&&(e.color=this.chart.renderer.getContrast(-1<n(i.shape,this.shapesWithoutBackground)?"#FFFFFF":i.backgroundColor)),o.points=[],o.options=i,o.itemType="label",o.labelrank=i.labelrank,o.annotation=this,o.attr(r).css(e).shadow(i.shadow),this.labels.push(o)},redrawItem:function(t){var i,e=this.linkPoints(t),r=t.options;e.length?(t.parentGroup||this.renderItem(t),"label"===t.itemType&&(i=r.format||r.text,t.attr({text:i?h(i,e[0].getLabelConfig()):r.formatter.call(e[0])})),"path"===t.type?this.redrawPath(t):this.alignItem(t,!t.placed)):this.destroyItem(t)},destroyItem:function(t){o(this[t.itemType+"s"],t),t.destroy()},pointItem:function(t,i){return i&&null!==i.series||(r(t)?i=v(this.chart,t):e(t)&&(i=this.chart.get(t)||null)),i},linkPoints:function(t){var i,e,r=t.options.points||t.options.point&&s.splat(t.options.point),o=t.points,n=r&&r.length;for(i=0;i<n;i++){if(!(e=this.pointItem(r[i],o[i])))return t.points=[];o[i]=e}return o},alignItem:function(t,i){var e=this.itemAnchor(t,t.points[0]),r=this.itemPosition(t,e);r?(t.alignAttr=r,t.placed=!0,r.anchorX=e.absolutePosition.x,r.anchorY=e.absolutePosition.y,t[i?"attr":"animate"](r)):(t.placed=!1,t.attr({x:0,y:-9e9}))},redrawPath:function(t,i){var e,r,o,n,s=t.points,a=t["stroke-width"],h=["M"],l=0,d=0,p=s&&s.length;if(p)for(;o=s[l],r=this.itemAnchor(t,o).absolutePosition,h[++d]=r.x,h[++d]=r.y,0===(e=d%5)&&(h[e+1]===h[e+4]&&(h[e+1]=h[e+4]=Math.round(h[e+1])-a%2/2),h[e+2]===h[e+5]&&(h[e+2]=h[e+5]=Math.round(h[e+2])+a%2/2)),l<p-1&&(h[++d]="L"),n=o.series.visible,++l<p&&n;);n?t[i?"attr":"animate"]({d:h}):t.attr({d:"M 0 "+-9e9}),t.placed=n},renderItem:function(t){t.add("label"===t.itemType?this.labelsGroup:this.shapesGroup),this.setItemMarkers(t)},setItemMarkers:function(n){var s=n.options,a=this.chart,h=a.options.defs.markers,t=s.fill,l=f(t)&&"none"!==t?t:s.stroke;p(["markerStart","markerEnd"],function(t){var i,e,r,o=s[t];if(o){for(r in h)if(o===(i=h[r]).id){e=i;break}e&&(i=n[t]=a.renderer.addMarker(null,d(e,{color:l})),n.attr(t,i.id))}})},itemAnchor:function(t,i){var e=i.series.getPlotBox(),r=i.mock?i.alignToBox(!0):m.getAnchor.call({chart:this.chart},i),o={x:r[0],y:r[1],height:r[2]||0,width:r[3]||0};return{relativePosition:o,absolutePosition:d(o,{x:o.x+e.translateX,y:o.y+e.translateY})}},itemPosition:function(t,i){var e,r,o,n,s=this.chart,a=t.points[0],h=t.options,l=i.absolutePosition,d=i.relativePosition,p=a.series.visible&&!1!==a.isInside;return p&&(f(h.distance)||h.positioner?e=(h.positioner||m.getPosition).call({chart:s,distance:g(h.distance,16)},t.width,t.height,{plotX:d.x,plotY:d.y,negative:a.negative,ttBelow:a.ttBelow,h:d.height||d.width}):(r={x:l.x,y:l.y,width:0,height:0},e=this.alignedPosition(c(h,{width:t.width,height:t.height}),r),"justify"===t.options.overflow&&(e=this.alignedPosition(this.justifiedOptions(t,h,e),r))),h.crop&&(o=e.x-s.plotLeft,n=e.y-s.plotTop,p=s.isInsidePlot(o,n)&&s.isInsidePlot(o+t.width,n+t.height))),p?e:null},alignedPosition:function(t,i){var e,r,o=t.align,n=t.verticalAlign,s=(i.x||0)+(t.x||0),a=(i.y||0)+(t.y||0);return"right"===o?e=1:"center"===o&&(e=2),e&&(s+=(i.width-(t.width||0))/e),"bottom"===n?r=1:"middle"===n&&(r=2),r&&(a+=(i.height-(t.height||0))/r),{x:Math.round(s),y:Math.round(a)}},justifiedOptions:function(t,i,e){var r,o=this.chart,n=i.align,s=i.verticalAlign,a=t.box?0:t.padding||0,h=t.getBBox(),l={align:n,verticalAlign:s,x:i.x,y:i.y,width:t.width,height:t.height},d=e.x-o.plotLeft,p=e.y-o.plotTop;return(r=d+a)<0&&("right"===n?l.align="left":l.x=-r),(r=d+h.width-a)>o.plotWidth&&("left"===n?l.align="right":l.x=o.plotWidth-r),(r=p+a)<0&&("bottom"===s?l.verticalAlign="top":l.y=-r),(r=p+h.height-a)>o.plotHeight&&("top"===s?l.verticalAlign="bottom":l.y=o.plotHeight-r),l},attrsFromOptions:function(t){var i,e,r=this.attrsMap,o={};for(i in t)(e=r[i])&&(o[e]=t[i]);return o}},s.extend(y,{addAnnotation:function(t,i){var e=new w(this,t);return this.annotations.push(e),g(i,!0)&&e.redraw(),e},removeAnnotation:function(i){var t=this.annotations,e=a(t,function(t){return t.options.id===i});e&&(o(t,e),e.destroy())},drawAnnotations:function(){var t=this.plotBoxClip,i=this.plotBox;t?t.attr(i):this.plotBoxClip=this.renderer.clipRect(i),p(this.annotations,function(t){t.redraw()})}}),y.callbacks.push(function(i){i.annotations=[],p(i.options.annotations,function(t){i.addAnnotation(t,!1)}),i.drawAnnotations(),t(i,"redraw",i.drawAnnotations),t(i,"destroy",function(){var t=i.plotBoxClip;t&&t.destroy&&t.destroy()})}),s.wrap(y,"getContainer",function(t){t.call(this);var i,e,r,o=this.renderer,n=this.options;for(i in n.defs=d(n.defs||{},{markers:b}),e=n.defs.markers)r=e[i],g(r.render,!0)&&o.addMarker(r.id,r)}),s.SVGRenderer.prototype.symbols.connector=function(t,i,e,r,o){var n,s,a=o&&o.anchorX,h=o&&o.anchorY,l=e/2;return u(a)&&u(h)&&(n=["M",a,h],(s=i-h)<0&&(s=-r-s),s<e&&(l=a<t+e/2?s:e-s),i+r<h?n.push("L",t+l,i+r):h<i?n.push("L",t+l,i):a<t?n.push("L",t,i+r/2):t+e<a&&n.push("L",t+e,i+r/2)),n||[]}}(t)});